---
repository:
  name: docenteia
  owner: unknown
  url: ""
generated:
  timestamp: 2025-07-29T03:59:30.495Z
  tool: FlatRepo
statistics:
  totalFiles: 30
  totalLines: 1993
  languages:
    json: 6
    markdown: 2
    javascript: 4
    typescript: 11
    tsx: 4
    css: 1
  fileTypes:
    .json: 6
    .md: 2
    .js: 4
    .mjs: 1
    .example: 1
    .ts: 11
    .tsx: 4
    .css: 1
---

===  tsconfig.json
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "forceConsistentCasingInFileNames": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```
=== EOF: tsconfig.json

===  TECHNICAL_DOCS.md
```markdown
# Documentación Técnica - DocenteIA

## Arquitectura del Sistema

### Stack Tecnológico
- **Framework**: Next.js 15 con App Router
- **Lenguaje**: TypeScript 5.x
- **Estilos**: Tailwind CSS 4.x
- **Linting**: ESLint con reglas estrictas
- **Build**: SWC (Rust-based compiler)

### Estructura de Carpetas
```
src/
├── app/                    # App Router (Next.js 15)
│   ├── layout.tsx         # Layout principal
│   ├── page.tsx           # Página principal
│   └── globals.css        # Estilos globales
├── components/             # Componentes reutilizables
│   └── ui/                # Componentes de UI base
├── lib/                   # Utilidades y helpers
│   ├── utils.ts           # Funciones utilitarias
│   ├── constants.ts       # Constantes del sistema
│   └── config.ts          # Configuración centralizada
└── types/                 # Tipos TypeScript
    └── global.d.ts        # Tipos globales
```

## Configuraciones Clave

### TypeScript (tsconfig.json)
- **Target**: ES2022 para mejor rendimiento
- **Strict Mode**: Habilitado completamente
- **No Unused**: Variables y parámetros no utilizados
- **No Implicit Returns**: Requiere returns explícitos
- **Force Consistent Casing**: Consistencia en nombres de archivos

### ESLint (eslint.config.mjs)
- **Next.js Core Web Vitals**: Optimización de rendimiento
- **TypeScript Rules**: Verificaciones estrictas
- **No Unused Variables**: Error para variables no utilizadas
- **No Explicit Any**: Advertencia para tipos `any`
- **Prefer Const**: Forzar uso de `const`

### Next.js (next.config.ts)
- **React Strict Mode**: Detección de efectos secundarios
- **Optimize Package Imports**: Optimización de imports
- **Modern Image Formats**: WebP y AVIF
- **Console Removal**: Eliminar console.log en producción

## Componentes del Sistema

### Button Component
```typescript
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'default' | 'destructive' | 'outline' | 'secondary' | 'ghost' | 'link';
  size?: 'default' | 'sm' | 'lg' | 'icon';
}
```

**Características**:
- Variantes múltiples con `class-variance-authority`
- Tipos estrictos de TypeScript
- Accesibilidad integrada
- Reutilizable y extensible

### Utilidades (lib/utils.ts)
```typescript
// Combinación de clases CSS
cn("class1", "class2")

// Formateo de fechas
formatDate(new Date())

// Generación de IDs únicos
generateId()
```

## Optimizaciones de Rendimiento

### Build Optimizations
- **SWC Compiler**: Compilación rápida en Rust
- **Tree Shaking**: Eliminación de código no utilizado
- **Code Splitting**: División automática de bundles
- **Image Optimization**: Formatos modernos (WebP, AVIF)

### Runtime Optimizations
- **React Strict Mode**: Detección de problemas
- **Turbopack**: Bundler rápido en desarrollo
- **Incremental Static Regeneration**: Páginas estáticas dinámicas

## Seguridad

### TypeScript Strict Mode
- Verificación de tipos en tiempo de compilación
- Prevención de errores de runtime
- Mejor autocompletado y refactoring

### ESLint Security Rules
- Detección de código vulnerable
- Prevención de XSS
- Buenas prácticas de seguridad

## Escalabilidad

### Estructura Modular
- Componentes reutilizables
- Utilidades centralizadas
- Configuración tipada
- Separación de responsabilidades

### Configuración Flexible
- Variables de entorno tipadas
- Configuración centralizada
- Constantes organizadas
- Tipos exportables

## Mantenimiento

### Código Limpio
- ESLint con reglas estrictas
- TypeScript con verificaciones exhaustivas
- Documentación integrada
- Convenciones consistentes

### Testing Ready
- Estructura preparada para tests
- Componentes aislados
- Utilidades testables
- Configuración de testing

## Despliegue

### Optimizaciones de Producción
- Minificación automática
- Compresión de assets
- CDN ready
- PWA compatible

### Monitoreo
- Error boundaries preparados
- Analytics integrado
- Performance monitoring
- Logging estructurado 
```
=== EOF: TECHNICAL_DOCS.md

===  tailwind.config.js
```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
    './src/components/**/*.{js,ts,jsx,tsx,mdx}',
    './src/app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
    },
  },
  plugins: [],
} 
```
=== EOF: tailwind.config.js

===  README.md
```markdown
# DocenteIA - Sistema Estable con Next.js y TypeScript

Un sistema robusto y estable construido con Next.js 15, TypeScript estricto y Tailwind CSS.

## 🚀 Características

- **Next.js 15**: La versión más reciente con App Router
- **TypeScript Estricto**: Configuración robusta con verificaciones exhaustivas
- **Tailwind CSS 4**: Estilos modernos y optimizados
- **ESLint Configurado**: Reglas estrictas para código limpio
- **Componentes Reutilizables**: Sistema de componentes con TypeScript
- **Utilidades Optimizadas**: Funciones helper para desarrollo eficiente
- **OpenAI Integrado**: Chat inteligente con GPT-3.5-turbo
- **API Routes Seguras**: Endpoints protegidos para comunicación con IA

## 📦 Instalación

```bash
# Clonar el repositorio
git clone <tu-repositorio>
cd docenteia

# Instalar dependencias
npm install

# Configurar variables de entorno
cp env.example .env.local
# Editar .env.local y agregar tu OPENAI_API_KEY

# Ejecutar en desarrollo
npm run dev
```

## 🛠️ Scripts Disponibles

```bash
npm run dev          # Servidor de desarrollo
npm run build        # Construcción para producción
npm run start        # Servidor de producción
npm run lint         # Verificación de código con ESLint
npm run chat         # Chat terminal con IA y vector store
```

## 🏗️ Estructura del Proyecto

```
src/
├── app/                 # App Router de Next.js
│   ├── layout.tsx      # Layout principal
│   ├── page.tsx        # Página principal
│   └── globals.css     # Estilos globales
├── components/          # Componentes reutilizables
│   └── ui/             # Componentes de UI
│       └── Button.tsx  # Componente Button
├── lib/                # Utilidades y helpers
│   ├── utils.ts        # Funciones utilitarias
│   ├── openai.ts       # Configuración de OpenAI
│   ├── vector-store.ts # Configuración de vector store
│   ├── constants.ts    # Constantes del sistema
│   └── config.ts       # Configuración centralizada
├── components/         # Componentes reutilizables
│   ├── ui/            # Componentes de UI
│   └── ChatInterface.tsx # Chat con IA
└── types/              # Tipos TypeScript
    └── global.d.ts     # Tipos globales
```

## ⚙️ Configuraciones

### TypeScript
- Target: ES2022
- Strict mode habilitado
- Verificaciones estrictas de tipos
- No unused locals/parameters

### ESLint
- Reglas estrictas para TypeScript
- Prevención de código no utilizado
- Advertencias para `any` types

### Next.js
- React Strict Mode
- SWC Minify
- Optimización de imports
- Soporte para imágenes modernas

## 🎨 Componentes

### Button Component
Componente reutilizable con múltiples variantes:

```tsx
import { Button } from "@/components/ui/Button";

<Button variant="default" size="lg">
  Comenzar
</Button>
```

### ChatInterface Component
Chat inteligente con OpenAI:

```tsx
import { ChatInterface } from "@/components/ChatInterface";

<ChatInterface />
```

## 💻 Chat Terminal

```bash
npm run chat
```

**Comandos disponibles:**
- `/help` - Mostrar ayuda
- `/history` - Mostrar historial
- `/clear` - Limpiar historial
- `/vector <consulta>` - Consultar vector store
- `/search <consulta>` - Buscar documentos en vector store
- `/exit` - Salir del chat

**⚠️ Importante:** Para usar el vector store, necesitas tener el servidor corriendo:
```bash
# Terminal 1: Iniciar servidor
npm run dev

# Terminal 2: Ejecutar chat
npm run chat
```

## 📝 Utilidades

### Funciones Helper
```tsx
import { cn, formatDate, generateId } from "@/lib/utils";

// Combinar clases CSS
cn("class1", "class2")

// Formatear fechas
formatDate(new Date())

// Generar IDs únicos
generateId()
```

### Funciones de OpenAI
```tsx
import { sendChatMessage, generateText, analyzeSentiment } from "@/lib/openai";

// Enviar mensaje a ChatGPT
const response = await sendChatMessage(messages, 'gpt-3.5-turbo');

// Generar texto
const text = await generateText("Escribe un poema sobre la tecnología");

// Analizar sentimiento
const sentiment = await analyzeSentiment("Me encanta este producto!");
```

## 🔧 Desarrollo

### Agregar Nuevos Componentes
1. Crear en `src/components/ui/`
2. Usar TypeScript estricto
3. Implementar variantes con `class-variance-authority`
4. Exportar tipos de props

### Agregar Utilidades
1. Crear en `src/lib/`
2. Documentar con JSDoc
3. Exportar tipos TypeScript

## 🚀 Despliegue

El proyecto está optimizado para despliegue en Vercel:

```bash
npm run build
```

## 📄 Licencia

MIT License - ver archivo LICENSE para detalles.

## 🤝 Contribuir

1. Fork el proyecto
2. Crear una rama feature (`git checkout -b feature/AmazingFeature`)
3. Commit los cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abrir un Pull Request

## 📞 Soporte

Para soporte técnico, contacta al equipo de desarrollo.
```
=== EOF: README.md

===  postcss.config.js
```javascript
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
```
=== EOF: postcss.config.js

===  package.json
```json
{
  "name": "docenteia",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "chat": "node src/scripts/terminal-chat.js",
    "vector:add": "node src/scripts/add-to-vector.js"
  },
  "dependencies": {
    "@openai/agents": "^0.0.13",
    "@pinecone-database/pinecone": "^6.1.2",
    "autoprefixer": "^10.4.21",
    "axios": "^1.11.0",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "dotenv": "^17.2.1",
    "lucide-react": "^0.532.0",
    "next": "^14.2.0",
    "openai": "^5.10.2",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "tailwind-merge": "^3.3.1",
    "tailwindcss": "^3.4.17"
  },
  "devDependencies": {
    "@eslint/eslintrc": "^3",
    "@types/node": "^20.19.9",
    "@types/react": "^19.1.8",
    "@types/react-dom": "^19.1.6",
    "eslint": "^9",
    "eslint-config-next": "15.4.4",
    "flatrepo": "^1.2.0",
    "typescript": "^5"
  }
}
```
=== EOF: package.json

===  next.config.js
```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  experimental: {
    optimizePackageImports: ["lucide-react"],
  },
  images: {
    formats: ["image/webp", "image/avif"],
  },
  compiler: {
    removeConsole: process.env.NODE_ENV === "production",
  },
};

module.exports = nextConfig;
```
=== EOF: next.config.js

===  eslint.config.mjs
```
import { dirname } from "path";
import { fileURLToPath } from "url";
import { FlatCompat } from "@eslint/eslintrc";

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

const compat = new FlatCompat({
  baseDirectory: __dirname,
});

const eslintConfig = [
  ...compat.extends("next/core-web-vitals", "next/typescript"),
  {
    rules: {
      "@typescript-eslint/no-unused-vars": "error",
      "@typescript-eslint/no-explicit-any": "warn",
      "prefer-const": "error",
      "no-var": "error",
      "no-console": "warn",
    },
  },
];

export default eslintConfig;
```
=== EOF: eslint.config.mjs

===  env.example
```
# OpenAI Configuration
OPENAI_API_KEY=your-openai-api-key-here

# Pinecone Configuration
PINECONE_API_KEY=your-pinecone-api-key-here
PINECONE_ENVIRONMENT=your-pinecone-environment

# App Configuration
NEXT_PUBLIC_APP_NAME=DocenteIA
NEXT_PUBLIC_APP_VERSION=1.0.0

# API Configuration
NEXT_PUBLIC_API_URL=http://localhost:3000/api 
```
=== EOF: env.example

===  contenido_sso_sesion03_prevencion_incendios.json
```json
{
  "metadata": {
    "titulo": "Guía IA - Docente Uno a Uno",
    "tema": "Prevención de Incendios en el Trabajo",
    "duracion_estimada": "90 minutos",
    "carrera": "MSEII",
    "palabras_clave_generales": ["prevencion_incendios", "seguridad", "salud_ocupacional", "triangulo_fuego", "extintores", "rutas_evacuacion", "capacitacion", "docente_ia"]
  },
  "momentos": [
    {
      "momento": "MOMENTO_0",
      "titulo": "SALUDO Y ENCENDIDO DEL AULA",
      "palabras_clave": ["saludo", "bienvenida", "clima_confianza", "presentacion", "conexion_inicial"],
      "objetivo": "Establecer conexión inicial y clima de confianza",
      "duracion": "5 minutos",
      "accion_docente_ia": "Saluda con calidez al estudiante, nómbralo, genera un clima de confianza",
      "frase_modelo": "Hola [nombre], bienvenido. ¿Cómo estás hoy? ¿Te gustaría compartir una palabra que describa cómo te sientes?",
      "presentacion_sesion": "Hoy vas a aprender algo fundamental para tu seguridad y la de tus compañeros: la prevención de incendios. Es un conocimiento que puede salvar vidas en cualquier momento.",
      "transicion": {
        "indicaciones_ia": "Avisa al estudiante que comenzarán con una situación real para entender por qué es importante la prevención de incendios",
        "frase_transicion": "Vamos a comenzar conectando con un caso que ocurrió realmente. Esto nos ayudará a entender por qué es importante lo que veremos"
      }
    },
    {
      "momento": "MOMENTO_1",
      "titulo": "CONEXIÓN CON SABERES PREVIOS Y RELEVANCIA",
      "palabras_clave": ["conexion", "saberes_previos", "relevancia", "caso_real", "evento_impactante", "importancia_prevencion"],
      "objetivo": "Conectar conocimientos previos con la relevancia del tema",
      "duracion": "15 minutos",
      "accion_docente_ia": "Conecta con un evento real o impactante que refuerce la importancia de la prevención de incendios",
      "indicaciones": "Muestra este video o describe el siguiente caso: Hace dos años, en una oficina, un cortocircuito en una computadora causó un incendio que se propagó rápidamente. Aunque había extintores disponibles, nadie sabía cómo usarlos correctamente.",
      "preguntas": [
        {
          "numero": 1,
          "texto": "¿Qué crees que falló en ese caso?",
          "tipo": "pregunta_reflexiva",
          "respuesta_correcta": "No sabían usar los extintores o No identificaron el riesgo de cortocircuito",
          "respuesta_incorrecta": "Fue culpa del electricista",
          "correccion_ia": "En prevención de incendios no buscamos culpas, sino prevenir. Lo que importa es entender qué falló en el sistema de prevención"
        },
        {
          "numero": 2,
          "texto": "¿Por qué crees que es importante saber prevenir incendios en el trabajo?",
          "tipo": "pregunta_relevancia",
          "respuesta_correcta": "Para proteger vidas y evitar pérdidas materiales",
          "respuesta_incorrecta": "Porque lo exige la ley",
          "correccion_ia": "Es más que un requisito legal. Un incendio puede costar vidas y destruir todo en minutos"
        }
      ],
      "transicion": {
        "indicaciones_ia": "Felicita brevemente al estudiante por participar y anticipa que ahora explicarán los componentes del triángulo del fuego",
        "frase_transicion": "Muy bien, gracias por tus respuestas. Ahora te voy a explicar paso a paso qué es el triángulo del fuego y cómo prevenimos incendios"
      }
    },
    {
      "momento": "MOMENTO_2",
      "titulo": "ADQUISICIÓN DE CONOCIMIENTOS BÁSICOS",
      "palabras_clave": ["adquisicion_conocimientos", "triangulo_fuego", "combustible", "oxigeno", "calor", "extintores", "tipos_incendio"],
      "objetivo": "Explicar cada componente del triángulo del fuego de manera sencilla",
      "duracion": "20 minutos",
      "accion_docente_ia": "Explica cada componente del triángulo del fuego de manera sencilla, una por una. Después de explicar, pide un ejemplo",
      "explicacion_breve": "El fuego necesita tres elementos para existir: Combustible, Oxígeno y Calor. Si eliminamos uno, el fuego se apaga. Empecemos por el primer elemento.",
      "preguntas": [
        {
          "numero": 1,
          "texto": "¿Podrías darme un ejemplo de un combustible que podrías encontrar en tu trabajo?",
          "tipo": "pregunta_ejemplo",
          "respuesta_correcta": "Papel, madera, gasolina, aceite",
          "respuesta_incorrecta": "El aire",
          "correccion_ia": "El aire es el oxígeno, no el combustible. El combustible es lo que se quema"
        },
        {
          "numero": 2,
          "texto": "¿Cómo podrías eliminar el oxígeno de un fuego pequeño?",
          "tipo": "pregunta_control",
          "respuesta_correcta": "Cubriendo con una manta o usando un extintor de CO2",
          "respuesta_incorrecta": "Soplando",
          "correccion_ia": "Soplar puede avivar el fuego. Necesitamos sofocarlo sin oxígeno"
        },
        {
          "numero": 3,
          "texto": "Si hay mucho combustible y oxígeno disponible, ¿el riesgo de incendio será alto, medio o bajo?",
          "tipo": "pregunta_evaluacion",
          "respuesta_correcta": "Alto",
          "respuesta_incorrecta": "Bajo",
          "correccion_ia": "Explica con una escala visual simple si es necesario"
        }
      ],
      "transicion": {
        "indicaciones_ia": "Informa al estudiante que ahora pondrá en práctica lo aprendido con un caso realista",
        "frase_transicion": "Vamos a aplicar lo que has aprendido en una situación real. Quiero que pienses como si tú estuvieras ahí"
      }
    },
    {
      "momento": "MOMENTO_3",
      "titulo": "APLICACIÓN PRÁCTICA",
      "palabras_clave": ["aplicacion_practica", "caso_realista", "incendio_oficina", "extintor", "actividad_guiada", "practica_extintor"],
      "objetivo": "Aplicar conocimientos en situación práctica",
      "duracion": "25 minutos",
      "accion_docente_ia": "Plantea el siguiente caso: Hay un incendio pequeño en una papelera de la oficina. ¿Qué harías primero?",
      "caso_practico": "Hay un incendio pequeño en una papelera de la oficina. ¿Qué harías primero?",
      "preguntas": [
        {
          "numero": 1,
          "texto": "¿Cuál es el peligro más evidente en esta situación?",
          "tipo": "pregunta_identificacion",
          "respuesta_correcta": "El fuego puede propagarse rápidamente",
          "respuesta_incorrecta": "El humo manchará la pared",
          "correccion_ia": "El humo es peligroso, pero el riesgo principal es la propagación del fuego"
        },
        {
          "numero": 2,
          "texto": "¿Qué control aplicarías para ese peligro?",
          "tipo": "pregunta_control",
          "respuesta_correcta": "Usar el extintor más cercano o evacuar si es necesario",
          "respuesta_incorrecta": "Dejar que se apague solo",
          "correccion_ia": "Un incendio no se apaga solo, puede propagarse rápidamente"
        }
      ],
      "actividad_guiada": "Ayúdalo a construir una mini matriz de prevención de 3 columnas: Peligro – Riesgo – Control. Corrige si confunde categorías",
      "transicion": {
        "indicaciones_ia": "Indica que ahora compararán su análisis con una propuesta de referencia",
        "frase_transicion": "Muy bien, ahora quiero mostrarte cómo resolvería esta situación un especialista. Veamos cómo se compara con tu análisis"
      }
    },
    {
      "momento": "MOMENTO_4",
      "titulo": "DISCUSIÓN Y CONTRASTE",
      "palabras_clave": ["discusion", "contraste", "matriz_prevencion_modelo", "comparacion", "analisis", "mejora"],
      "objetivo": "Comparar análisis del estudiante con propuesta de referencia",
      "duracion": "15 minutos",
      "accion_docente_ia": "Comparte una matriz de prevención modelo. Luego, pregúntale",
      "preguntas": [
        {
          "numero": 1,
          "texto": "¿En qué se parece tu matriz a esta? ¿Identificaste el mismo peligro?",
          "tipo": "pregunta_comparacion",
          "respuesta_correcta": "Sí, también puse el riesgo de propagación del fuego",
          "respuesta_incorrecta": "No puse nada",
          "correccion_ia": "No hay problema. Este es un momento para comparar y aprender. Miremos de nuevo juntos"
        },
        {
          "numero": 2,
          "texto": "¿Cambiarías algo de tu propuesta ahora que ves esta matriz?",
          "tipo": "pregunta_mejora",
          "respuesta_correcta": "Sí, creo que puedo mejorar el control",
          "respuesta_incorrecta": "No importa mucho",
          "correccion_ia": "Importa porque el control correcto puede salvar una vida. Volvamos a mirar tu opción"
        }
      ],
      "transicion": {
        "indicaciones_ia": "Agradece la participación y plantea una última pregunta reflexiva para cerrar",
        "frase_transicion": "Muy buen trabajo hasta aquí. Vamos a terminar con una pregunta para que apliques esto a tu vida laboral"
      }
    },
    {
      "momento": "MOMENTO_5",
      "titulo": "REFLEXIÓN FINAL Y CIERRE",
      "palabras_clave": ["reflexion_final", "cierre", "aplicacion_vida_laboral", "proyeccion", "contexto_real"],
      "objetivo": "Proyectar al estudiante a su contexto real",
      "duracion": "10 minutos",
      "accion_docente_ia": "Plantea una pregunta que proyecte al estudiante a su contexto real",
      "preguntas": [
        {
          "numero": 1,
          "texto": "Si mañana ves humo saliendo de una máquina en tu área de trabajo, ¿qué es lo primero que debes hacer?",
          "tipo": "pregunta_aplicacion",
          "respuesta_correcta": "Activar la alarma de incendio y evacuar",
          "respuesta_incorrecta": "Intentar apagarlo yo solo",
          "correccion_ia": "Tu seguridad es lo primero. Activa la alarma y evacúa, los bomberos sabrán qué hacer"
        }
      ],
      "cierre_docente_ia": "Muy bien, [nombre], hoy diste un gran paso. Recuerda que la prevención de incendios es más que saber usar un extintor: es una forma de pensar. Estar atento a los riesgos y saber qué hacer puede proteger tu vida y la de los demás. ¿Qué te gustaría reforzar la próxima vez?"
    }
  ]
} 
```
=== EOF: contenido_sso_sesion03_prevencion_incendios.json

===  contenido_sso_sesion01_MSEII.json
```json
{
  "metadata": {
    "titulo": "Guía IA - Docente Uno a Uno",
    "tema": "Introducción al IPERC",
    "duracion_estimada": "90 minutos",
    "carrera": "MSEII",
    "palabras_clave_generales": ["IPERC", "seguridad", "salud_ocupacional", "identificacion_peligros", "evaluacion_riesgos", "controles", "capacitacion", "docente_ia"]
  },
  "momentos": [
    {
      "momento": "MOMENTO_0",
      "titulo": "SALUDO Y ENCENDIDO DEL AULA",
      "palabras_clave": ["saludo", "bienvenida", "clima_confianza", "presentacion", "conexion_inicial"],
      "objetivo": "Establecer conexión inicial y clima de confianza",
      "duracion": "5 minutos",
      "accion_docente_ia": "Saluda con calidez al estudiante, nómbralo, genera un clima de confianza",
      "frase_modelo": "Hola [nombre], bienvenido. ¿Cómo estás hoy? ¿Te gustaría compartir una palabra que describa cómo te sientes?",
      "presentacion_sesion": "Hoy vas a aprender algo fundamental para tu seguridad y la de tus compañeros: el IPERC. Es una herramienta que te ayuda a ver lo que otros podrían pasar por alto.",
      "transicion": {
        "indicaciones_ia": "Avisa al estudiante que comenzarán con una situación real para entender por qué es importante el IPERC",
        "frase_transicion": "Vamos a comenzar conectando con un caso que ocurrió realmente. Esto nos ayudará a entender por qué es importante lo que veremos"
      }
    },
    {
      "momento": "MOMENTO_1",
      "titulo": "CONEXIÓN CON SABERES PREVIOS Y RELEVANCIA",
      "palabras_clave": ["conexion", "saberes_previos", "relevancia", "caso_real", "evento_impactante", "importancia_iperc"],
      "objetivo": "Conectar conocimientos previos con la relevancia del tema",
      "duracion": "15 minutos",
      "accion_docente_ia": "Conecta con un evento real o impactante que refuerce la importancia del IPERC",
      "indicaciones": "Muestra este video o describe el siguiente caso: Hace un año, en una planta de procesamiento, un trabajador sufrió quemaduras por contacto con ácido. El peligro estaba identificado, pero nadie colocó la señal de advertencia.",
      "preguntas": [
        {
          "numero": 1,
          "texto": "¿Qué crees que falló en ese caso?",
          "tipo": "pregunta_reflexiva",
          "respuesta_correcta": "No identificaron bien el peligro o No pusieron los controles adecuados",
          "respuesta_incorrecta": "Fue culpa del trabajador",
          "correccion_ia": "En IPERC no buscamos culpas, sino prevenir. Lo que importa es entender qué falló en el sistema"
        },
        {
          "numero": 2,
          "texto": "¿Por qué crees que es importante identificar los peligros antes de realizar un trabajo?",
          "tipo": "pregunta_relevancia",
          "respuesta_correcta": "Para evitar accidentes",
          "respuesta_incorrecta": "Porque sí lo piden",
          "correccion_ia": "Es más que un requisito. Un peligro no identificado puede costar una vida"
        }
      ],
      "transicion": {
        "indicaciones_ia": "Felicita brevemente al estudiante por participar y anticipa que ahora explicarán los componentes del IPERC",
        "frase_transicion": "Muy bien, gracias por tus respuestas. Ahora te voy a explicar paso a paso qué significa IPERC y cómo lo aplicamos"
      }
    },
    {
      "momento": "MOMENTO_2",
      "titulo": "ADQUISICIÓN DE CONOCIMIENTOS BÁSICOS",
      "palabras_clave": ["adquisicion_conocimientos", "componentes_iperc", "identificacion_peligros", "evaluacion_riesgos", "controles", "ejemplos_practicos"],
      "objetivo": "Explicar cada componente del IPERC de manera sencilla",
      "duracion": "20 minutos",
      "accion_docente_ia": "Explica cada componente del IPERC de manera sencilla, una por una. Después de explicar, pide un ejemplo",
      "explicacion_breve": "El IPERC significa Identificación de Peligros, Evaluación de Riesgos y Controles. Empecemos por el primer paso.",
      "preguntas": [
        {
          "numero": 1,
          "texto": "¿Podrías darme un ejemplo de un peligro físico que podrías encontrar en una mina?",
          "tipo": "pregunta_ejemplo",
          "respuesta_correcta": "Ruido, Polvo, Caídas de rocas",
          "respuesta_incorrecta": "Los compañeros molestos",
          "correccion_ia": "Eso podría ser un problema interpersonal, pero no un peligro físico para la salud o seguridad"
        },
        {
          "numero": 2,
          "texto": "¿Cómo podrías controlar ese peligro?",
          "tipo": "pregunta_control",
          "respuesta_correcta": "Con protección auditiva",
          "respuesta_incorrecta": "Ignorándolo",
          "correccion_ia": "Ignorar un peligro lo hace más riesgoso. Siempre debe tener un control"
        },
        {
          "numero": 3,
          "texto": "Si algo es muy probable y el daño es severo, ¿el riesgo será alto, medio o bajo?",
          "tipo": "pregunta_evaluacion",
          "respuesta_correcta": "Alto",
          "respuesta_incorrecta": "Bajo",
          "correccion_ia": "Explica con una escala visual simple si es necesario"
        }
      ],
      "transicion": {
        "indicaciones_ia": "Informa al estudiante que ahora pondrá en práctica lo aprendido con un caso realista",
        "frase_transicion": "Vamos a aplicar lo que has aprendido en una situación real. Quiero que pienses como si tú estuvieras ahí"
      }
    },
    {
      "momento": "MOMENTO_3",
      "titulo": "APLICACIÓN PRÁCTICA",
      "palabras_clave": ["aplicacion_practica", "caso_realista", "inspeccion_area", "liquidos_corrosivos", "matriz_iperc", "actividad_guiada"],
      "objetivo": "Aplicar conocimientos en situación práctica",
      "duracion": "25 minutos",
      "accion_docente_ia": "Plantea el siguiente caso: Estás por inspeccionar un área donde hay líquidos corrosivos. ¿Qué harías primero?",
      "caso_practico": "Estás por inspeccionar un área donde hay líquidos corrosivos. ¿Qué harías primero?",
      "preguntas": [
        {
          "numero": 1,
          "texto": "¿Cuál es el peligro más evidente en esta situación?",
          "tipo": "pregunta_identificacion",
          "respuesta_correcta": "El contacto con líquidos corrosivos",
          "respuesta_incorrecta": "El color del piso",
          "correccion_ia": "El color del piso no representa un peligro por sí solo. Centrémonos en lo que puede causar daño"
        },
        {
          "numero": 2,
          "texto": "¿Qué control aplicarías para ese peligro?",
          "tipo": "pregunta_control",
          "respuesta_correcta": "Colocar señalización, usar EPP como guantes",
          "respuesta_incorrecta": "Pasar rápido por la zona",
          "correccion_ia": "Pasar rápido no reduce el peligro ni garantiza que otros estén protegidos"
        }
      ],
      "actividad_guiada": "Ayúdalo a construir una mini matriz IPERC de 3 columnas: Peligro – Riesgo – Control. Corrige si confunde categorías",
      "transicion": {
        "indicaciones_ia": "Indica que ahora compararán su análisis con una propuesta de referencia",
        "frase_transicion": "Muy bien, ahora quiero mostrarte cómo resolvería esta situación un especialista. Veamos cómo se compara con tu análisis"
      }
    },
    {
      "momento": "MOMENTO_4",
      "titulo": "DISCUSIÓN Y CONTRASTE",
      "palabras_clave": ["discusion", "contraste", "matriz_iperc_modelo", "comparacion", "analisis", "mejora"],
      "objetivo": "Comparar análisis del estudiante con propuesta de referencia",
      "duracion": "15 minutos",
      "accion_docente_ia": "Comparte una matriz IPERC modelo. Luego, pregúntale",
      "preguntas": [
        {
          "numero": 1,
          "texto": "¿En qué se parece tu matriz a esta? ¿Identificaste el mismo peligro?",
          "tipo": "pregunta_comparacion",
          "respuesta_correcta": "Sí, también puse el riesgo químico",
          "respuesta_incorrecta": "No puse nada",
          "correccion_ia": "No hay problema. Este es un momento para comparar y aprender. Miremos de nuevo juntos"
        },
        {
          "numero": 2,
          "texto": "¿Cambiarías algo de tu propuesta ahora que ves esta matriz?",
          "tipo": "pregunta_mejora",
          "respuesta_correcta": "Sí, creo que puedo mejorar el control",
          "respuesta_incorrecta": "No importa mucho",
          "correccion_ia": "Importa porque el control correcto puede salvar una vida. Volvamos a mirar tu opción"
        }
      ],
      "transicion": {
        "indicaciones_ia": "Agradece la participación y plantea una última pregunta reflexiva para cerrar",
        "frase_transicion": "Muy buen trabajo hasta aquí. Vamos a terminar con una pregunta para que apliques esto a tu vida laboral"
      }
    },
    {
      "momento": "MOMENTO_5",
      "titulo": "REFLEXIÓN FINAL Y CIERRE",
      "palabras_clave": ["reflexion_final", "cierre", "aplicacion_vida_laboral", "proyeccion", "contexto_real"],
      "objetivo": "Proyectar al estudiante a su contexto real",
      "duracion": "10 minutos",
      "accion_docente_ia": "Plantea una pregunta que proyecte al estudiante a su contexto real",
      "preguntas": [
        {
          "numero": 1,
          "texto": "Si mañana entras a una zona con ruido, polvo y movimiento de maquinaria, ¿qué es lo primero que debes hacer?",
          "tipo": "pregunta_aplicacion",
          "respuesta_correcta": "Identificar los peligros",
          "respuesta_incorrecta": "Ponerse el casco y entrar",
          "correccion_ia": "El casco es importante, pero identificar los peligros te permite saber si solo el casco basta"
        }
      ],
      "cierre_docente_ia": "Muy bien, [nombre], hoy diste un gran paso. Recuerda que el IPERC es más que una tabla: es una forma de pensar. Estar atento a los peligros y controlar los riesgos puede proteger tu vida y la de los demás. ¿Qué te gustaría reforzar la próxima vez?"
    }
  ]
} 
```
=== EOF: contenido_sso_sesion01_MSEII.json

===  src\types\global.d.ts
```typescript
declare global {
  interface Window {
    __NEXT_DATA__: unknown;
  }
}

export interface BaseComponentProps {
  className?: string;
  children?: React.ReactNode;
}

export interface ApiResponse<T = unknown> {
  success: boolean;
  data?: T;
  error?: string;
  message?: string;
}

export interface PaginatedResponse<T> extends ApiResponse<T[]> {
  pagination: {
    page: number;
    limit: number;
    total: number;
    totalPages: number;
  };
} 
```
=== EOF: src\types\global.d.ts

===  src\scripts\terminal-chat.js
```javascript
#!/usr/bin/env node

const readline = require('readline');
const axios = require('axios');

// Configurar readline
const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
});

// Colores simples
const colors = {
  reset: '\x1b[0m',
  green: '\x1b[32m',
  yellow: '\x1b[33m',
  red: '\x1b[31m',
  cyan: '\x1b[36m',
};

function print(color, text) {
  console.log(`${colors[color]}${text}${colors.reset}`);
}

// Función para consultar vector store
async function queryVectorStore(query) {
  try {
    print('yellow', '🔍 Consultando vector store...');
    
    const response = await axios.post('http://localhost:3000/api/openai-vector', {
      query,
    }, {
      headers: {
        'Content-Type': 'application/json',
      },
    });

    print('green', '\n🤖 Respuesta:');
    console.log(response.data.response);
    console.log('');
    
  } catch (error) {
    if (error.code === 'ECONNREFUSED') {
      print('red', '❌ Error: El servidor Next.js no está corriendo.');
      print('yellow', '💡 Ejecuta: npm run dev');
    } else {
      print('red', `Error: ${error.message}`);
    }
  }
}

// Función para mostrar ayuda
function showHelp() {
  print('cyan', '\n=== COMANDOS ===');
  print('white', '/vector <consulta> - Consultar vector store');
  print('white', '/help - Mostrar ayuda');
  print('white', '/exit - Salir');
  print('cyan', '================\n');
}

// Función principal
async function startChat() {
  print('cyan', '🤖 Chat Terminal - Vector Store');
  print('yellow', 'Escribe /help para ver comandos\n');

  const askQuestion = () => {
    rl.question(`${colors.green}👤 Tú: ${colors.reset}`, async (input) => {
      const trimmedInput = input.trim();

      if (trimmedInput === '') {
        askQuestion();
        return;
      }

      if (trimmedInput === '/exit') {
        print('yellow', '¡Hasta luego! 👋');
        rl.close();
        return;
      }

      if (trimmedInput === '/help') {
        showHelp();
        askQuestion();
        return;
      }

      if (trimmedInput.startsWith('/vector ')) {
        const query = trimmedInput.substring(8);
        await queryVectorStore(query);
        askQuestion();
        return;
      }

      print('red', '❌ Comando no reconocido. Usa /help para ver comandos disponibles.');
      askQuestion();
    });
  };

  askQuestion();
}

// Manejar salida
rl.on('close', () => {
  process.exit(0);
});

// Iniciar
startChat().catch(console.error); 
```
=== EOF: src\scripts\terminal-chat.js

===  src\scripts\package.json
```json
{
  "type": "commonjs"
} 
```
=== EOF: src\scripts\package.json

===  src\lib\vector-store.ts
```typescript
import OpenAI from 'openai';
import { Pinecone } from '@pinecone-database/pinecone';
import { findSessionByQuery } from './course-database';

// Configurar OpenAI para embeddings
const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

// Configurar Pinecone
const pinecone = new Pinecone({
  apiKey: process.env.PINECONE_API_KEY || '',
});

// Interfaz para documentos
export interface Document {
  id: string;
  content: string;
  metadata?: Record<string, any>;
}

// Función para crear embeddings
export async function createEmbedding(text: string): Promise<number[]> {
  try {
    const response = await openai.embeddings.create({
      model: 'text-embedding-ada-002',
      input: text,
    });
    
    return response.data[0].embedding;
  } catch (error) {
    console.error('Error al crear embedding:', error);
    throw new Error('Error al crear embedding');
  }
}

// Función para buscar documentos similares
export async function searchSimilarDocuments(
  query: string,
  indexName: string = 'docenteia-index',
  topK: number = 5
): Promise<Document[]> {
  try {
    // Crear embedding de la consulta
    const queryEmbedding = await createEmbedding(query);
    
    // Buscar en Pinecone
    const index = pinecone.index(indexName);
    const searchResponse = await index.query({
      vector: queryEmbedding,
      topK,
      includeMetadata: true,
    });

    // Convertir resultados a documentos
    const documents: Document[] = searchResponse.matches?.map(match => ({
      id: match.id,
      content: String(match.metadata?.content || ''),
      metadata: match.metadata,
    })) || [];

    return documents;
  } catch (error) {
    console.error('Error al buscar documentos:', error);
    return [];
  }
}

// Función para agregar documento al vector store
export async function addDocumentToVectorStore(
  document: Document,
  indexName: string = 'docenteia-index'
): Promise<void> {
  try {
    const embedding = await createEmbedding(document.content);
    
    const index = pinecone.index(indexName);
    await index.upsert([{
      id: document.id,
      values: embedding,
      metadata: {
        content: document.content,
        ...document.metadata,
      },
    }]);
  } catch (error) {
    console.error('Error al agregar documento:', error);
    throw new Error('Error al agregar documento al vector store');
  }
}

// Función para obtener contexto basado en consulta
export async function getContextFromQuery(
  query: string,
  indexName: string = 'docenteia-index'
): Promise<string> {
  try {
    const documents = await searchSimilarDocuments(query, indexName, 3);
    
    if (documents.length === 0) {
      return 'No se encontró información relevante en la base de datos.';
    }

    // Combinar contenido de documentos relevantes
    const context = documents
      .map(doc => doc.content)
      .join('\n\n---\n\n');

    return `Información relevante encontrada:\n\n${context}`;
  } catch (error) {
    console.error('Error al obtener contexto:', error);
    return 'Error al buscar información en la base de datos.';
  }
}

// Función para crear respuesta con contexto
export async function createContextualResponse(
  query: string,
  indexName: string = 'docenteia-index'
): Promise<string> {
  try {
    const context = await getContextFromQuery(query, indexName);
    
    const messages = [
      {
        role: 'system' as const,
        content: `Eres un asistente experto. Usa la siguiente información para responder la pregunta del usuario. Si la información no es suficiente, indícalo claramente.

Información disponible:
${context}

Responde de manera clara y concisa basándote en la información proporcionada.`
      },
      {
        role: 'user' as const,
        content: query
      }
    ];

    const completion = await openai.chat.completions.create({
      model: 'gpt-3.5-turbo',
      messages,
      max_tokens: 500,
      temperature: 0.7,
    });

    return completion.choices[0]?.message?.content || 'No se pudo generar una respuesta.';
  } catch (error) {
    console.error('Error al crear respuesta contextual:', error);
    return 'Error al procesar la consulta con el vector store.';
  }
}

// Función para consultar el vector store de OpenAI usando el SDK oficial
export async function queryOpenAIVectorStore(
  query: string
): Promise<string> {
  try {
    // Buscar la sesión en la base de datos del curso
    const session = findSessionByQuery(query);
    
    if (!session) {
      return 'No se encontró ninguna sesión que coincida con tu consulta. Sesiones disponibles: sesion01 (IPERC), sesion02, sesion03 (Prevención de Incendios).';
    }

    // Usar chat completions con información específica del archivo
    const completion = await openai.chat.completions.create({
      model: "gpt-4.1-mini",
      messages: [
        {
          role: 'system',
          content: `Eres un asistente experto en SSO (Seguridad y Salud Ocupacional). 
          El usuario está consultando sobre: ${session.name}
          File ID: ${session.file_id}
          Archivo: ${session.file_name}
          
          IMPORTANTE: Responde basándote ÚNICAMENTE en el contenido específico de este archivo.
          Si la información no está en el archivo, indícalo claramente.
          
          El archivo contiene información estructurada sobre capacitación en SSO.`
        },
        {
          role: 'user',
          content: query
        }
      ],
      max_tokens: 1500,
      temperature: 0.3
    });

    return completion.choices[0]?.message?.content || 'No se pudo generar una respuesta.';
  } catch (error) {
    console.error('Error al consultar vector store de OpenAI:', error);
    return `Error al consultar el vector store de OpenAI: ${error instanceof Error ? error.message : 'Error desconocido'}`;
  }
} 
```
=== EOF: src\lib\vector-store.ts

===  src\lib\utils.ts
```typescript
import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

export function formatDate(date: Date): string {
  return new Intl.DateTimeFormat("es-ES", {
    year: "numeric",
    month: "long",
    day: "numeric",
  }).format(date)
}

export function generateId(): string {
  return Math.random().toString(36).substring(2) + Date.now().toString(36)
} 
```
=== EOF: src\lib\utils.ts

===  src\lib\openai.ts
```typescript
import OpenAI from 'openai';

// Configuración de OpenAI
export const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY || '',
  dangerouslyAllowBrowser: false, // Solo para servidor
});

// Tipos para las respuestas de OpenAI
export interface ChatMessage {
  role: 'user' | 'assistant' | 'system';
  content: string;
}

export interface ChatResponse {
  content: string;
  usage?: {
    prompt_tokens: number;
    completion_tokens: number;
    total_tokens: number;
  };
}

// Función para enviar mensaje a ChatGPT
export async function sendChatMessage(
  messages: ChatMessage[],
  model: string = 'gpt-3.5-turbo'
): Promise<ChatResponse> {
  try {
    if (!process.env.OPENAI_API_KEY) {
      throw new Error('OPENAI_API_KEY no está configurada');
    }

    const completion = await openai.chat.completions.create({
      model,
      messages,
      max_tokens: 1000,
      temperature: 0.7,
    });

    const response = completion.choices[0]?.message?.content || '';
    
    return {
      content: response,
      usage: completion.usage ? {
        prompt_tokens: completion.usage.prompt_tokens,
        completion_tokens: completion.usage.completion_tokens,
        total_tokens: completion.usage.total_tokens,
      } : undefined,
    };
  } catch (error) {
    console.error('Error al comunicarse con OpenAI:', error);
    throw new Error('Error al procesar la solicitud');
  }
}

// Función para generar texto con GPT
export async function generateText(
  prompt: string,
  model: string = 'gpt-3.5-turbo'
): Promise<string> {
  try {
    const completion = await openai.chat.completions.create({
      model,
      messages: [{ role: 'user', content: prompt }],
      max_tokens: 500,
      temperature: 0.7,
    });

    return completion.choices[0]?.message?.content || '';
  } catch (error) {
    console.error('Error al generar texto:', error);
    throw new Error('Error al generar texto');
  }
}

// Función para analizar sentimientos
export async function analyzeSentiment(text: string): Promise<string> {
  try {
    const completion = await openai.chat.completions.create({
      model: 'gpt-3.5-turbo',
      messages: [
        {
          role: 'system',
          content: 'Analiza el sentimiento del siguiente texto y responde solo con: POSITIVO, NEGATIVO o NEUTRAL.'
        },
        {
          role: 'user',
          content: text
        }
      ],
      max_tokens: 10,
      temperature: 0.3,
    });

    return completion.choices[0]?.message?.content || 'NEUTRAL';
  } catch (error) {
    console.error('Error al analizar sentimiento:', error);
    return 'NEUTRAL';
  }
} 
```
=== EOF: src\lib\openai.ts

===  src\lib\course-database.ts
```typescript
import courseData from '../data/courses-database.json';

export interface Session {
  id: string;
  name: string;
  file_id: string;
  file_name: string;
}

export interface Course {
  id: string;
  name: string;
  description: string;
  sessions: Session[];
  metadata: {
    total_sessions: number;
    total_files: number;
    created_at: string;
    last_updated: string;
  };
}

export interface CourseDatabase {
  courses: Course[];
}

// Función para buscar una sesión basada en la consulta
export function findSessionByQuery(query: string): Session | null {
  const queryLower = query.toLowerCase();
  
  // Buscar en todos los cursos
  for (const course of courseData.courses) {
    for (const session of course.sessions) {
      // Buscar por ID de sesión
      if (queryLower.includes(session.id.toLowerCase())) {
        return session;
      }
      
      // Buscar por nombre de sesión
      if (queryLower.includes(session.name.toLowerCase())) {
        return session;
      }
      
      // Buscar por nombre de archivo
      if (queryLower.includes(session.file_name.toLowerCase())) {
        return session;
      }
    }
  }
  
  return null;
}

// Función para obtener todas las sesiones disponibles
export function getAllSessions(): Session[] {
  const sessions: Session[] = [];
  
  for (const course of courseData.courses) {
    sessions.push(...course.sessions);
  }
  
  return sessions;
}

// Función para obtener información de una sesión específica
export function getSessionInfo(sessionId: string): Session | null {
  for (const course of courseData.courses) {
    const session = course.sessions.find(s => s.id === sessionId);
    if (session) {
      return session;
    }
  }
  
  return null;
} 
```
=== EOF: src\lib\course-database.ts

===  src\lib\constants.ts
```typescript
export const APP_CONFIG = {
  name: "DocenteIA",
  version: "1.0.0",
  description: "Sistema estable con Next.js y TypeScript",
  author: "Tu Nombre",
  repository: "https://github.com/tu-usuario/docenteia",
} as const;

export const API_ENDPOINTS = {
  base: process.env.NEXT_PUBLIC_API_URL || "http://localhost:3000/api",
  auth: "/auth",
  users: "/users",
  courses: "/courses",
} as const;

export const ROUTES = {
  home: "/",
  about: "/about",
  contact: "/contact",
  dashboard: "/dashboard",
} as const;

export const BREAKPOINTS = {
  sm: 640,
  md: 768,
  lg: 1024,
  xl: 1280,
  "2xl": 1536,
} as const; 
```
=== EOF: src\lib\constants.ts

===  src\lib\config.ts
```typescript
export const config = {
  app: {
    name: process.env.NEXT_PUBLIC_APP_NAME || "DocenteIA",
    version: process.env.NEXT_PUBLIC_APP_VERSION || "1.0.0",
    description: "Sistema estable con Next.js y TypeScript",
  },
  api: {
    baseUrl: process.env.NEXT_PUBLIC_API_URL || "http://localhost:3000/api",
    timeout: 10000,
  },
  auth: {
    secret: process.env.NEXTAUTH_SECRET,
    url: process.env.NEXTAUTH_URL || "http://localhost:3000",
  },
  features: {
    analytics: process.env.NEXT_PUBLIC_GA_ID,
    darkMode: true,
    pwa: false,
  },
} as const;

export type Config = typeof config; 
```
=== EOF: src\lib\config.ts

===  src\data\courses-database.json
```json
{
  "courses": [
    {
      "id": "SSO001",
      "name": "Seguridad y Salud Ocupacional",
      "description": "Curso completo de SSO con múltiples sesiones de capacitación",
      "sessions": [
        {
          "id": "sesion01",
          "name": "IPERC - Identificación de Peligros, Evaluación de Riesgos y Controles",
          "file_id": "file-J4of8sWdLfzv3vKza4A42h",
          "file_name": "contenido_sso_sesion01_MSEII.md"
        },
        {
          "id": "sesion02", 
          "name": "Sesión 02 de SSO",
          "file_id": "file-MLGFPC2nruo5t5jjC9En1a",
          "file_name": "contenido_sso_sesion02_MSEII.json"
        },
        {
          "id": "sesion03",
          "name": "Prevención de Incendios en el Trabajo", 
          "file_id": "file-MPwrLaMwDkie5yQrymSRqo",
          "file_name": "contenido_sso_sesion03_MSEII.json"
        }
      ],
      "metadata": {
        "total_sessions": 3,
        "total_files": 3,
        "created_at": "2025-07-28",
        "last_updated": "2025-07-28"
      }
    }
  ]
} 
```
=== EOF: src\data\courses-database.json

===  src\components\ChatInterface.tsx
```tsx
'use client';

import React, { useState } from 'react';
import { Button } from '@/components/ui/Button';
import { ChatMessage } from '@/lib/openai';

interface Message {
  role: 'user' | 'assistant';
  content: string;
  timestamp: Date;
}

export function ChatInterface() {
  const [messages, setMessages] = useState<Message[]>([]);
  const [input, setInput] = useState('');
  const [isLoading, setIsLoading] = useState(false);

  const sendMessage = async () => {
    if (!input.trim() || isLoading) return;

    const userMessage: Message = {
      role: 'user',
      content: input,
      timestamp: new Date(),
    };

    setMessages(prev => [...prev, userMessage]);
    setInput('');
    setIsLoading(true);

    try {
      const chatMessages: ChatMessage[] = [
        ...messages.map(msg => ({
          role: msg.role,
          content: msg.content,
        })),
        { role: 'user', content: input },
      ];

      const response = await fetch('/api/chat', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          messages: chatMessages,
          model: 'gpt-3.5-turbo',
        }),
      });

      if (!response.ok) {
        throw new Error('Error en la respuesta del servidor');
      }

      const data = await response.json();
      
      const assistantMessage: Message = {
        role: 'assistant',
        content: data.content,
        timestamp: new Date(),
      };

      setMessages(prev => [...prev, assistantMessage]);
    } catch (error) {
      console.error('Error al enviar mensaje:', error);
      const errorMessage: Message = {
        role: 'assistant',
        content: 'Lo siento, hubo un error al procesar tu mensaje.',
        timestamp: new Date(),
      };
      setMessages(prev => [...prev, errorMessage]);
    } finally {
      setIsLoading(false);
    }
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  };

  return (
    <div className="max-w-2xl mx-auto p-4">
      <div className="bg-white dark:bg-gray-800 rounded-lg shadow-lg">
        {/* Header */}
        <div className="border-b border-gray-200 dark:border-gray-700 p-4">
          <h2 className="text-lg font-semibold text-gray-900 dark:text-white">
            Chat con IA
          </h2>
          <p className="text-sm text-gray-600 dark:text-gray-400">
            Pregunta lo que quieras a la inteligencia artificial
          </p>
        </div>

        {/* Messages */}
        <div className="h-96 overflow-y-auto p-4 space-y-4">
          {messages.length === 0 && (
            <div className="text-center text-gray-500 dark:text-gray-400">
              <p>¡Hola! Soy tu asistente de IA. ¿En qué puedo ayudarte?</p>
            </div>
          )}
          
          {messages.map((message, index) => (
            <div
              key={index}
              className={`flex ${
                message.role === 'user' ? 'justify-end' : 'justify-start'
              }`}
            >
              <div
                className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${
                  message.role === 'user'
                    ? 'bg-blue-600 text-white'
                    : 'bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white'
                }`}
              >
                <p className="text-sm">{message.content}</p>
                <p className="text-xs opacity-70 mt-1">
                  {message.timestamp.toLocaleTimeString()}
                </p>
              </div>
            </div>
          ))}
          
          {isLoading && (
            <div className="flex justify-start">
              <div className="bg-gray-100 dark:bg-gray-700 px-4 py-2 rounded-lg">
                <p className="text-sm text-gray-600 dark:text-gray-400">
                  Pensando...
                </p>
              </div>
            </div>
          )}
        </div>

        {/* Input */}
        <div className="border-t border-gray-200 dark:border-gray-700 p-4">
          <div className="flex space-x-2">
            <textarea
              value={input}
              onChange={(e) => setInput(e.target.value)}
              onKeyPress={handleKeyPress}
              placeholder="Escribe tu mensaje..."
              className="flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white resize-none"
              rows={2}
              disabled={isLoading}
            />
            <Button
              onClick={sendMessage}
              disabled={!input.trim() || isLoading}
              className="px-4 py-2"
            >
              {isLoading ? 'Enviando...' : 'Enviar'}
            </Button>
          </div>
        </div>
      </div>
    </div>
  );
} 
```
=== EOF: src\components\ChatInterface.tsx

===  src\app\page.tsx
```tsx
import { Button } from "@/components/ui/Button";
import { formatDate } from "@/lib/utils";
import { ChatInterface } from "@/components/ChatInterface";

export default function Home() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800">
      <div className="container mx-auto px-4 py-16">
        <div className="text-center mb-12">
          <h1 className="text-4xl md:text-6xl font-bold text-gray-900 dark:text-white mb-4">
            DocenteIA
          </h1>
          <p className="text-xl text-gray-600 dark:text-gray-300 mb-8">
            Sistema estable con Next.js, TypeScript e IA
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <Button size="lg" className="bg-blue-600 hover:bg-blue-700">
              Comenzar
            </Button>
            <Button variant="outline" size="lg">
              Documentación
            </Button>
          </div>
        </div>

        <div className="grid md:grid-cols-3 gap-8 mt-16 mb-16">
          <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
            <h3 className="text-xl font-semibold mb-4 text-gray-900 dark:text-white">
              TypeScript Estricto
            </h3>
            <p className="text-gray-600 dark:text-gray-300">
              Configuración robusta con verificaciones estrictas de tipos para mayor estabilidad.
            </p>
          </div>

          <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
            <h3 className="text-xl font-semibold mb-4 text-gray-900 dark:text-white">
              Next.js 14
            </h3>
            <p className="text-gray-600 dark:text-gray-300">
              La versión más estable con App Router y optimizaciones avanzadas.
            </p>
          </div>

          <div className="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg">
            <h3 className="text-xl font-semibold mb-4 text-gray-900 dark:text-white">
              OpenAI Integrado
            </h3>
            <p className="text-gray-600 dark:text-gray-300">
              Chat inteligente con GPT-3.5-turbo para asistencia automática.
            </p>
          </div>
        </div>

        {/* Chat Interface */}
        <div className="mt-16">
          <ChatInterface />
        </div>

        <div className="mt-12 text-center">
          <p className="text-sm text-gray-500 dark:text-gray-400">
            Última actualización: {formatDate(new Date())}
          </p>
        </div>
      </div>
    </div>
  );
}
```
=== EOF: src\app\page.tsx

===  src\app\layout.tsx
```tsx
import type { Metadata } from "next";
import "./globals.css";

export const metadata: Metadata = {
  title: "DocenteIA - Sistema Estable",
  description: "Sistema estable con Next.js y TypeScript",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body className="antialiased">
        {children}
      </body>
    </html>
  );
}
```
=== EOF: src\app\layout.tsx

===  src\app\globals.css
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: 0 0% 100%;
  --foreground: 0 0% 3.9%;
  --card: 0 0% 100%;
  --card-foreground: 0 0% 3.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 0 0% 3.9%;
  --primary: 0 0% 9%;
  --primary-foreground: 0 0% 98%;
  --secondary: 0 0% 96.1%;
  --secondary-foreground: 0 0% 9%;
  --muted: 0 0% 96.1%;
  --muted-foreground: 0 0% 45.1%;
  --accent: 0 0% 96.1%;
  --accent-foreground: 0 0% 9%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 0 0% 89.8%;
  --input: 0 0% 89.8%;
  --ring: 0 0% 3.9%;
  --radius: 0.5rem;
}

.dark {
  --background: 0 0% 3.9%;
  --foreground: 0 0% 98%;
  --card: 0 0% 3.9%;
  --card-foreground: 0 0% 98%;
  --popover: 0 0% 3.9%;
  --popover-foreground: 0 0% 98%;
  --primary: 0 0% 98%;
  --primary-foreground: 0 0% 9%;
  --secondary: 0 0% 14.9%;
  --secondary-foreground: 0 0% 98%;
  --muted: 0 0% 14.9%;
  --muted-foreground: 0 0% 63.9%;
  --accent: 0 0% 14.9%;
  --accent-foreground: 0 0% 98%;
  --destructive: 0 62.8% 30.6%;
  --destructive-foreground: 0 0% 98%;
  --border: 0 0% 14.9%;
  --input: 0 0% 14.9%;
  --ring: 0 0% 83.1%;
}

* {
  border-color: hsl(var(--border));
}

body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
}
```
=== EOF: src\app\globals.css

===  src\components\ui\Button.tsx
```tsx
import React from "react";
import { cn } from "@/lib/utils";
import { cva, type VariantProps } from "class-variance-authority";

const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "underline-offset-4 hover:underline text-primary",
      },
      size: {
        default: "h-10 py-2 px-4",
        sm: "h-9 px-3 rounded-md",
        lg: "h-11 px-8 rounded-md",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
);

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean;
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, ...props }, ref) => {
    return (
      <button
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    );
  }
);

Button.displayName = "Button";

export { Button, buttonVariants }; 
```
=== EOF: src\components\ui\Button.tsx

===  src\app\api\vector-query\route.ts
```typescript
import { NextRequest, NextResponse } from 'next/server';
import { createContextualResponse, searchSimilarDocuments } from '@/lib/vector-store';

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { query, indexName = 'docenteia-index', mode = 'contextual' } = body;

    if (!query) {
      return NextResponse.json(
        { error: 'Se requiere una consulta' },
        { status: 400 }
      );
    }

    let response;

    if (mode === 'search') {
      // Modo de búsqueda: devolver documentos similares
      const documents = await searchSimilarDocuments(query, indexName);
      response = {
        type: 'search',
        documents,
        query,
      };
    } else {
      // Modo contextual: generar respuesta basada en documentos
      const contextualResponse = await createContextualResponse(query, indexName);
      response = {
        type: 'contextual',
        response: contextualResponse,
        query,
      };
    }

    return NextResponse.json(response);
  } catch (error) {
    console.error('Error en vector query:', error);
    return NextResponse.json(
      { error: 'Error al procesar la consulta del vector store' },
      { status: 500 }
    );
  }
} 
```
=== EOF: src\app\api\vector-query\route.ts

===  src\app\api\vector-add\route.ts
```typescript
import { NextRequest, NextResponse } from 'next/server';
import { addDocumentToVectorStore, Document } from '@/lib/vector-store';

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { id, content, metadata, indexName = 'docenteia-index' } = body;

    if (!id || !content) {
      return NextResponse.json(
        { error: 'Se requiere ID y contenido del documento' },
        { status: 400 }
      );
    }

    const document: Document = {
      id,
      content,
      metadata,
    };

    await addDocumentToVectorStore(document, indexName);

    return NextResponse.json({
      success: true,
      id: document.id,
      message: 'Documento agregado exitosamente al vector store',
    });
  } catch (error) {
    console.error('Error al agregar documento:', error);
    return NextResponse.json(
      { error: 'Error al agregar documento al vector store' },
      { status: 500 }
    );
  }
} 
```
=== EOF: src\app\api\vector-add\route.ts

===  src\app\api\openai-vector\route.ts
```typescript
import { NextRequest, NextResponse } from 'next/server';
import { queryOpenAIVectorStore } from '../../../lib/vector-store';

export async function POST(request: NextRequest) {
  try {
    const { query } = await request.json();

    if (!query) {
      return NextResponse.json(
        { error: 'Query es requerida' },
        { status: 400 }
      );
    }

    const response = await queryOpenAIVectorStore(query);

    return NextResponse.json({ response });
  } catch (error) {
    console.error('Error en la ruta OpenAI vector:', error);
    return NextResponse.json(
      { error: 'Error interno del servidor' },
      { status: 500 }
    );
  }
} 
```
=== EOF: src\app\api\openai-vector\route.ts

===  src\app\api\chat\route.ts
```typescript
import { NextRequest, NextResponse } from 'next/server';
import { sendChatMessage, ChatMessage } from '@/lib/openai';

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { messages, model = 'gpt-3.5-turbo' } = body;

    // Validar que se proporcionen mensajes
    if (!messages || !Array.isArray(messages)) {
      return NextResponse.json(
        { error: 'Se requieren mensajes válidos' },
        { status: 400 }
      );
    }

    // Validar que cada mensaje tenga la estructura correcta
    const validMessages: ChatMessage[] = messages.map((msg: any) => ({
      role: msg.role,
      content: msg.content,
    }));

    // Enviar mensaje a OpenAI
    const response = await sendChatMessage(validMessages, model);

    return NextResponse.json(response);
  } catch (error) {
    console.error('Error en API chat:', error);
    return NextResponse.json(
      { error: 'Error interno del servidor' },
      { status: 500 }
    );
  }
} 
```
=== EOF: src\app\api\chat\route.ts

